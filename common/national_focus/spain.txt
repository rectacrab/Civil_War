focus_tree = {
	id = spain_republic_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SPR
			#has_dlc = "Together for Victory"
		}

		#modifier = {
		#	add = 10
		#	original_tag = AST
		#	has_dlc = "Together for Victory"
		#}
	}

	default = no
	reset_on_civilwar = no


	focus = {
		id = spr_african_infra
		icon = GFX_goal_generic_construct_civilian
		x = 2
		y = 0
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					NOT = {
						AND = {
							699 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
							297 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
							290 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
						}
					}
					AND = {
						NOT ={
							699 = {
								free_building_slots = {
									building = infrastructure
									size > 3
								}
							}
						}
						297 = {
							NOT = {
								free_building_slots = {
									building = infrastructure
									size > 3
								}
							}
						}
						290 = {
							NOT = {
								free_building_slots = {
									building = infrastructure
									size > 3
								}
							}
						}
					}					
				}
				random_owned_controlled_state = {
					limit =  {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
						NOT = { is_on_continent = europe }
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit =  {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
						NOT = { is_on_continent = europe }
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					OR = {
						NOT = {				
							699 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
						}
						NOT = {				
							297 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
						}
						NOT = {				
							290 = {
								free_building_slots = {
									building = infrastructure
									size > 1
								}
							}
						}
					}
					OR = {
						699 = {
							free_building_slots = {
								building = infrastructure
								size > 3
							}
						}
						297 = {
							free_building_slots = {
								building = infrastructure
								size > 3
							}
						}
						290 = {
							free_building_slots = {
								building = infrastructure
								size > 3
							}
						}
					}
				}
				every_owned_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = infrastructure
							size > 3
						}
						OR = {
							state = 699
							state = 297					
							state = 290
						}
					}					
					add_building_construction = {
						type = infrastructure
						level = 4
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					699 = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					297 = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					290 = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
				}
				699 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				297 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				290 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = spr_northafrican_industry
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = spr_african_infra }
		x = 0
		y = 1
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			290 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
					}
			}
			178 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = spr_saharan_oil
		icon = GFX_goal_generic_production
		prerequisite = { focus = spr_northafrican_industry }
		available = {
			SPR = {
				controls_state = 699
			}
		}
		
		x = 0
		y = 2
		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1
		}	
		completion_reward = {
			add_resource = {
				type = oil
				amount = 6
				state = 699
			}
		}
	}

	focus = {
		id = spr_subsaharan_industry
		icon = GFX_goal_generic_construction
		prerequisite = { focus = spr_african_infra }
		x = 2
		y = 1
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			699 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
					}
			}
			297 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}	


	focus = {
		id = spr_guinean_oil
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = spr_subsaharan_industry }
		available = {
			SPR = {
				controls_state = 297
			}
		}
		
		x = 2
		y = 2
		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1
		}	
		completion_reward = {
			add_resource = {
				type = oil
				amount = 10
				state = 297
			}

			add_resource = {
				type = rubber
				amount = 2
				state = 297
			}
		}
	}	

	focus = {
		id = spr_northafrican_arms
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = spr_african_infra }
		x = 4
		y = 1
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					290 = {
						free_building_slots = {
							building = arms_factory
							size > 3
							include_locked = yes
						}
					}
				}
				290 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}			
			}
			if = {
				limit = {
					178 = {
						free_building_slots = {
							building = arms_factory
							size > 3
							include_locked = yes
						}
					}
				}
				178 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}			
			}
		}

	}



	#military & Political focus
	focus = {
		id = spr_rif_lessons
		icon = GFX_goal_generic_army_artillery2
		x = 6
		y = 0
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 0.5
				uses = 1
				category = artillery
			}

		}
	}


	focus = {
		id = spr_modernization_effort
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = spr_rif_lessons }
		x = 6
		y = 1
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 10
			add_tech_bonus = {
				name = RAJ_army_motorization
				bonus = 0.5
				uses = 1
				category = motorized_equipment
			}
			add_tech_bonus = {
				name = special_bonus
				ahead_reduction = 1
				uses = 1
				technology = tech_mountaineers2
			}
		}
	}

	focus = {
		id = spr_invite_germans
		icon = GFX_goal_support_fascism
		prerequisite = { focus = spr_modernization_effort }
		mutually_exclusive = { focus = spr_engage_soviets }
		
		available ={
			has_government = fascism
		}
		x = 4
		y = 2
		cost = 2

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 10
			add_tech_bonus = {
				name = land_doc_bonus
				bonus = 0.5
				uses = 1
				category = land_doctrine
			}
			add_tech_bonus = {
				name = op_dest_bonus
				bonus = 0.5
				uses = 1
				category = battlefield_support_tree
			}
		}
	}


	focus = {
		id = spr_engage_soviets
		icon = GFX_goal_support_communism
		prerequisite = { focus = spr_modernization_effort }
		mutually_exclusive = { focus = spr_invite_germans }

		available ={
			has_government = communism
		}
		x = 8
		y = 2
		cost = 2

		available_if_capitulated = yes
		
		completion_reward = {
			army_experience = 10
			add_tech_bonus = {
				name = land_doc_bonus
				bonus = 0.5
				uses = 1
				category = land_doctrine
			}

			add_tech_bonus = {
				name = armor_bonus
				bonus = 0.5
				uses = 1
				category = armor
			}
		}
	}


	#post-civil-war focus tree.
	focus = {
		id = spr_cutting_edge
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = spr_engage_soviets focus = spr_invite_germans }
		x = 6
		y = 3
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			air_experience = 25
			army_experience = 10
			add_tech_bonus = {
				name = fighter_bonus
				bonus = 0.5
				uses = 1
				technology = early_fighter
				technology = fighter1
				technology = fighter2
				technology = fighter3
				technology = tactical_bomber1
				technology = tactical_bomber2
				technology = tactical_bomber3
			}
			add_tech_bonus = {
				name = armor_bonus
				bonus = 0.5
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = spr_heal_wounds
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = spr_cutting_edge }
		available = {
			NOT = { has_government = democratic }
			has_war = no
		}

		x = 6
		y = 4
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			#conscription = 0.005
		}
	}

	#Armor Focus tree
	focus = {
		id = spr_armor_focus
		icon = GFX_goal_generic_build_tank
		prerequisite = { focus = spr_heal_wounds }
		mutually_exclusive = { focus = spr_infantry_focus }
		x = 7
		y = 5
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
				add_ideas = FRA_motorized_focus
		}
	}

	#Infantry focus
	focus = {
		id = spr_infantry_focus
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = spr_heal_wounds }
		mutually_exclusive = { focus = spr_armor_focus }
		x = 5
		y = 5
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = FRA_infantry_focus
		}
	}


	#FASCISM focus
	focus = {
		id = spr_terror_white
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = spr_invite_germans }
		x = 2
		y = 3
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			add_ideas = SPA_white_terror
		}

		completion_reward = {
			add_ideas = SPA_white_terror
		}
	}

	focus = {
		id = spr_german_scientists
		icon = GFX_focus_research
		prerequisite = { focus = spr_terror_white }

		x = 2
		y = 4
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			add_research_slot = 1
		}
	}	
	
	#COMMUNISM focus
	focus = {
		id = spr_terror_red
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = spr_engage_soviets }
		available = {has_war = yes}
		x = 10
		y = 3
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			add_ideas = SPR_red_terror
		}

		completion_reward = {
			add_ideas = SPR_red_terror
		}
	}

	focus = {
		id = spr_soviet_science
		icon = GFX_focus_research
		prerequisite = { focus = spr_terror_red }

		x = 10
		y = 4
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			add_research_slot = 1
		}
	}		

	focus = {
		id = spr_comm_portugal_war
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = spr_terror_red }
		x = 10
		y = 5
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
				type = take_state_focus
				target = POR
				generator = { 112 179 180 } # lisbon, porto, beja
			}
		}
	}

	#AIR/SEA & INDUSTRY
	#AIR/LAND FOCUS
	focus = {
		id = spr_army_industry
		icon = GFX_goal_generic_axis_build_infantry
		mutually_exclusive = { focus = spr_new_armada }
		x = 15
		y = 0
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					arms_factory > 0
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					arms_factory > 0
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

			if = {
				limit = {
					NOT = {
						any_owned_state = {
							arms_factory > 0
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}				
			}
		}
	}

	#SEA FOCUS
	focus = {
		id = spr_new_armada
		icon = GFX_goal_generic_build_navy
		mutually_exclusive = { focus = spr_army_industry }
		x = 17
		y = 0
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			navy_experience = 50
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}

			if = {
				limit = {
					NOT = {
						any_owned_state = {
							dockyard > 0
							free_building_slots = {
								building = dockyard
								size > 0
								include_locked = yes
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}				
			}

			add_tech_bonus = {
				name = naval_doctrine_bonus
				bonus = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
	}	

	focus = {
		id = spr_naval_studies
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = spr_new_armada focus = spr_army_industry }
		x = 18
		y = 1
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			#conscription = 0.005
		}
	}	

	focus = {
		id = spr_air_tactics
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = spr_new_armada focus = spr_army_industry }
		x = 14
		y = 1
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			#conscription = 0.005
		}
	}		

	focus = {
		id = spr_air_fighter_focus
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = spr_air_tactics }
		x = 14
		y = 1
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			#conscription = 0.005
		}
	}			

	#improvement & science tree

	focus = {
		id = spr_industrialize_countryside
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = spr_new_armada focus = spr_army_industry }

		x = 16
		y = 1
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_on_continent = europe
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_on_continent = europe
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					NOT = {
						any_owned_state = {
							free_building_slots = {
								building = industrial_complex
								size > 1
								include_locked = yes
							}
							is_on_continent = europe
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}				
			}
		}
	}		


	focus = {
		id = spr_science_focus
		icon = GFX_focus_research
		prerequisite = { focus = spr_industrialize_countryside }

		x = 16
		y = 2
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			add_research_slot = 1
		}
	}		

	focus = {
		id = spr_nuclear_research
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = spr_science_focus }

		x = 16
		y = 3
		cost = 10

		available_if_capitulated = no

		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.5
				uses = 2
				category = nuclear
				category = rocketry
			}
		}
	}		

}